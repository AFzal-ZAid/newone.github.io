var sltrg={getQueue:function(){return JSON.parse(sessionStorage.getItem("trackingQueue"))||[]},addEventToQueue:function(e){var r=sltrg.getQueue();r.push({id:sltrg.createId(),event:e}),sessionStorage.setItem("trackingQueue",JSON.stringify(r))},sendEvent:function(e,r,t){var n=new XMLHttpRequest;n.open("POST",window.slConfig.envURLs.trackingApiHost+"/api/event",!0),n.setRequestHeader("Content-Type","application/json"),n.onload=r,n.onerror=t,n.send(JSON.stringify(e))},removeFromQueue:function(e){for(var r,t=sltrg.getQueue(),n=0;n<t.length;n++)if(t[n].id===e){r=n;break}t.splice(r,1),sessionStorage.setItem("trackingQueue",JSON.stringify(t))},createId:function(){var e=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==r?t:3&t|8).toString(16)})}};function getUserId(){var e=JSON.parse(localStorage.getItem("user"));return e?e.data.id:null}function slTrack(e){var r={experiment:e.experiment||"",action:e.action,element:e.element,page:window.location.href,referrer:document.referrer,subject:document.cookie.replace(/(?:(?:^|.*;\s*)fngprntId\s*\=\s*([^;]*).*$)|^.*$/,"$1"),userId:e.userId||getUserId(),entityId:"number"==typeof e.entityId||"string"==typeof e.entityId?e.entityId:null};e.redirectUrl?(sltrg.addEventToQueue(r),window.location.href=e.redirectUrl):(sltrg.addEventToQueue(r),clearTrackingQueue())}function clearTrackingQueue(){var e=sltrg.getQueue();if(e.length){var r=e[0].id,t=e[0].event;sltrg.sendEvent(t,function(){clearTrackingQueue()}),sltrg.removeFromQueue(r)}}clearTrackingQueue();